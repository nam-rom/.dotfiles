(self.webpackChunkmomentum=self.webpackChunkmomentum||[]).push([[2813],{68481:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={inserted:function(e,t){var a;if(!1===(null==t?void 0:t.value))return;const s=null==e||null===(a=e.value)||void 0===a?void 0:a.length;e.select(),(s||0===s)&&(e.setSelectionRange(s,s),e.scrollLeft=e.scrollWidth)}}},32533:(e,t,a)=>{(e.exports=a(23645)(!1)).push([e.id,"\n.label-wrapper[data-v-6abbcf90] { display: flex; gap: 10px; align-items: center;\n}\n.loading-icon[data-v-6abbcf90] { height: 10px; width: 10px;\n}\n",""])},93676:(e,t,a)=>{(e.exports=a(23645)(!1)).push([e.id,"\n.v-typeahead[data-v-a92d2096] { background-color: transparent;\n}\n.v-typeahead .dropdown-list[data-v-a92d2096] { padding: 0; display: block; background: var(--color-accent-highlight); border-radius: 0 0 var(--border-radius) var(--border-radius); box-shadow: none;\n}\n.v-typeahead ul[data-v-a92d2096] { padding: 6px 0;\n}\n.v-typeahead li[data-v-a92d2096], .v-typeahead .not-found[data-v-a92d2096] { max-width: none; padding: 4px 9px; opacity: 0.8; cursor: pointer; font-size: 0.875rem;\n}\n.v-typeahead li[data-v-a92d2096]:hover { background: var(--dropdown-hover-bg);\n}\n.v-typeahead .no-results[data-v-a92d2096] { opacity: 0.6;\n}\n",""])},12813:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"label-wrapper"},[a("label",[e._v("Location")]),e._v(" "),e.loadingTimezone?a("div",{staticClass:"loading-icon",attrs:{"data-test":"loading-timezone"}}):e._e()]),e._v(" "),a("location-typeahead",{class:{pulse:e.warning},attrs:{"before-fetch-results":e.interceptUtcSearch,value:e.transformedValue,type:"timezone"},on:{input:e.getTimezone}})],1)};s._withStripped=!0;var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("typeahead",{attrs:{value:e.inputValue,results:e.results,loading:e.loading,"no-results":e.noResults,type:e.type,placeholder:"Type a location"},on:{input:e.fetchResults,select:e.onSelect}})};n._withStripped=!0;var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-typeahead",class:{searching:e.resultsVisible}},[a("input",{directives:[{name:"soft-focus",rawName:"v-soft-focus"}],attrs:{type:"text",placeholder:e.placeholder,spellcheck:"false",autocomplete:"off","data-test":e.type+"-input"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},focus:function(e){return e.target.select()}}}),e._v(" "),e.resultsVisible?a("smooth-reflow",{staticClass:"dropdown-list",attrs:{nested:!0,"hide-overflow":!0}},[a("ul",{attrs:{"data-test":"typeahead-dropdown"}},[a("li",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"searching"},[e._v("Searching...")]),e._v(" "),e._l(e.results,(function(t,s){return a("li",{key:s,attrs:{"data-test":e.type+"-result"},on:{click:function(a){return e.$emit("select",t)}}},[a("span",{staticClass:"name"},[e._v(e._s(t.name))])])})),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:e.noResults,expression:"noResults"}],staticClass:"no-results",attrs:{"data-test":"not-found"}},[e._v("No "+e._s(e.type)+"s found.")])],2)]):e._e()],1)};o._withStripped=!0;var i=a(68481);const l={name:"Typeahead",components:{SmoothReflow:a(72606).default},directives:{softFocus:i.Z},props:{value:{type:String,default:""},type:{type:String,default:""},results:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},placeholder:{type:String,required:!0},noResults:{type:Boolean,default:!1}},computed:{resultsVisible(){return this.results.length||this.loading||this.noResults}}};a(60035);var r=a(51900),u=(0,r.Z)(l,o,[],!1,null,"a92d2096",null);u.options.__file="source/addins-vue/shared_components/Typeahead.vue";const d=u.exports;var c=a(9669),p=a.n(c);const h={name:"LocationTypeahead",components:{Typeahead:d},props:{value:{type:Object,default:()=>({})},type:{type:String,default:"location"},beforeFetchResults:{type:Function,default:null}},data:()=>({results:[],inputValue:"",loading:!1,noResults:!1}),created(){this.value.name&&(this.inputValue=this.value.name)},methods:{async fetchResults(e){if(this.inputValue=e,e.length>2){var t;this.noResults=!1;const a=null===(t=this.beforeFetchResults)||void 0===t?void 0:t.call(this,e);if(a)this.results=a;else{this.loading=!0,this.cancelTokenSource&&this.cancelTokenSource.cancel(),this.cancelTokenSource=p().CancelToken.source();try{const{data:t}=await this.$xhr.get("/locations:search?input="+e,{cancelToken:this.cancelTokenSource.token});this.loading=!1,this.results=t,this.results.length||(this.noResults=!0)}catch(e){if(p().isCancel(e))return;console.error(e),this.loading=!1}}}else this.cancelTokenSource&&this.cancelTokenSource.cancel(),this.results=[],this.noResults=!1,this.loading=!1},onSelect(e){this.results=[],this.noResults=!1,this.$emit("input",e),this.inputValue=e.name}}};var v=(0,r.Z)(h,n,[],!1,null,null,null);v.options.__file="source/addins-vue/shared_components/LocationTypeahead.vue";const f=v.exports,g=a(94333).$x.map((({name:e,id:t})=>{const a=e.includes("-"),s=e.substring(3),n=s.replace(":",""),[o,i]=s.substring(1).split(":");return{name:e,shortName:e,offset:(60*o+i)*(a?-1:1),searchable:n,timeZoneId:t}})),y={name:"TimezoneTypeahead",components:{LocationTypeahead:f},props:{value:{type:Object,required:!0},componentFieldWarnings:{type:Array,default:()=>[]}},data:()=>({warning:!1,loadingTimezone:!1}),computed:{transformedValue(){return{name:this.value.timeZoneName,...this.value}}},watch:{componentFieldWarnings(e){e.includes("timeZoneId")&&(this.warning=!0),setTimeout((()=>this.warning=!1),1e3)}},methods:{async getTimezone({shortName:e,name:t,latitude:a,longitude:s,offset:n=0,timeZoneId:o=""}={}){if(this.$emit("input",{shortName:e,timeZoneName:t,offset:n,timeZoneId:o}),void 0===arguments[0].timeZoneId){this.loadingTimezone=!0;try{const{data:{name:n,offset:o}}=await this.$xhr.get(`/timezones:search?latitude=${a}&longitude=${s}`);this.$emit("input",{shortName:e,name,offset:o,timeZoneId:n,timeZoneName:t})}catch(e){console.error(e)}finally{this.loadingTimezone=!1}}},interceptUtcSearch(e){const t=e.toLowerCase().trim();if(t.includes("utc")||t.includes("gmt")){var a;const e=(null===(a=t.replace(":","").match(/(\d|-|\+)+/))||void 0===a?void 0:a[0])||"",s=m.utils.fuzzyFilter(e,g,"searchable");if(s.length)return s}}}};a(43744);var b=(0,r.Z)(y,s,[],!1,null,"6abbcf90",null);b.options.__file="source/addins-vue/baseMetric/components/TimezoneTypeahead.vue";const _=b.exports},43744:(e,t,a)=>{var s=a(32533);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(45346).Z)("c7c4f276",s,!1,{ssrId:!0})},60035:(e,t,a)=>{var s=a(93676);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(45346).Z)("60bb1218",s,!1,{ssrId:!0})}}]);