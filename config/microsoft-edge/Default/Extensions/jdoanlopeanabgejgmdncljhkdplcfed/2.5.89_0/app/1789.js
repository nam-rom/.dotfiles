"use strict";(self.webpackChunkmomentum=self.webpackChunkmomentum||[]).push([[1789],{21789:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"button accept",class:{disabled:t.processing},attrs:{"data-test":"start"},on:{click:t.acceptTrial}},[t.processing?n("span",[t._v(t._s(t.buttonProcessingText))]):n("span",[t._v(t._s(t.buttonText)+" "),n("inline-svg",{staticClass:"icon icon-next",attrs:{src:s(79557)}})],1)]),t._v(" "),t.showCancelBtn?n("div",{staticClass:"button-cancel",attrs:{"data-test":"cancel"},on:{click:t.rejectTrial}},[t._v(t._s(t.cancelText))]):t._e(),t._v(" "),n("transition",{attrs:{name:"fade",duration:"200"}},[t.errorMessage?n("div",{staticClass:"error",domProps:{innerHTML:t._s(t.errorMessage)}}):t._e()])],1)};n._withStripped=!0;const r=new(s(56962).Y)(1),a={name:"IntroHelper",props:{plans:{type:Object,default:()=>({})},showCancelBtn:{type:Boolean,default:!0},cancelText:{type:String,default:"No, thank you"},buttonText:{type:String,default:"Customize your enhanced dashboard"},buttonProcessingText:{type:String,default:"Preparing your dashboardâ€¦"}},data:()=>({processing:!1,errorMessage:""}),methods:{rejectTrial(){m.sendEvent("Onboarding","Intro","Plus trial rejected"),this.$emit("dismiss")},async acceptTrial(){if(this.errorMessage="",this.processing=!0,this.$plus)return this.$emit("next");try{this.plans.monthly||await new Promise((t=>{const e=this.$watch("plans",(s=>{s.monthly&&(e(),t())}),{deep:!0})})),await this.$xhr.post("account/subscriptions",{trial:!0,plan_id:this.plans.monthly.id}),m.sendEvent("Onboarding","Intro","Plus trial accepted"),this.loadPlusWidgetsAndProceed()}catch(e){var t;if(422===(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&this.$plus)return void this.loadPlusWidgetsAndProceed();this.processing=!1,console.error(e),m.sendEvent("Onboarding","Intro","Plus trial accept error"),m.globals.isProduction&&r.error("Signing up for PLUS trial error",e),this.errorMessage='Something went wrong. If the issue persists, please <a target="_blank" href="https://momentumdash.com/contact">contact us.</a>'}},loadPlusWidgetsAndProceed(){m.syncCoordinator.syncSettings((()=>{m.widgetManager.populateWidgets(),this.$emit("next")}))}}};var i=(0,s(51900).Z)(a,n,[],!1,null,null,null);i.options.__file="source/addins-vue/modal/onboarding/TrialSignUp.vue";const o=i.exports}}]);