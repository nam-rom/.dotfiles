const CAPTURE_DELAY=150;function onMessage(e,t,o){return"ping"===e.action?(o({action:"pong"}),!0):"scrollPage"===e.msg?(getPositions(o),!0):void 0}function max(e){return Math.max.apply(Math,e.filter(function(e){return e}))}function getPositions(e){let t=document.body,o=t?t.style.overflowY:"",n=window.scrollX,i=window.scrollY,l=document.documentElement.style.overflow;t&&(t.style.overflowY="visible");let c,d,s=[document.documentElement.clientWidth,t?t.scrollWidth:0,document.documentElement.scrollWidth,t?t.offsetWidth:0,document.documentElement.offsetWidth],m=[document.documentElement.clientHeight,t?t.scrollHeight:0,document.documentElement.scrollHeight,t?t.offsetHeight:0,document.documentElement.offsetHeight],r=max(s),u=max(m),w=window.innerWidth,a=window.innerHeight,f=[],h=a-(a>200?200:0),g=w,E=u-a;for(r<=g+1&&(r=g),document.documentElement.style.overflow="hidden";E>-h;){for(c=0;c<r;)f.push([c,E]),c+=g;E-=h}function v(){document.documentElement.style.overflow=l,t&&(t.style.overflowY=o),window.scrollTo(n,i)}d=f.length,function t(){if(!f.length)return v(),void(e&&e());let o=f.shift(),n=o[0],i=o[1];window.scrollTo(n,i);let l={action:"_makeCapture",x:window.scrollX,y:window.scrollY,complete:(d-f.length)/d,windowWidth:w,totalWidth:r,totalHeight:u,devicePixelRatio:window.devicePixelRatio};window.setTimeout(function(){let e=window.setTimeout(v,1250);chrome.runtime.sendMessage(l,function(o){window.clearTimeout(e),o?t():v()})},CAPTURE_DELAY)}()}window.__hasScreenCapturePage||(window.__hasScreenCapturePage=!0,chrome.runtime.onMessage.addListener(onMessage));