!function(e){function t(t){for(var n,c,s=t[0],o=t[1],i=t[2],m=0,d=[];m<s.length;m++)c=s[m],Object.prototype.hasOwnProperty.call(l,c)&&l[c]&&d.push(l[c][0]),l[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var o=a[s];0!==l[o]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},l={1:0},r=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var u=o;r.push([522,0]),a()}({522:function(e,t,a){a(70),e.exports=a(535)},523:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){},526:function(e,t,a){},527:function(e,t,a){},535:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a(0),r=a.n(l),c=a(28),s=a.n(c),o=a(49),i=a(48),u=a(232);a(523);function m(){return l.createElement("header",{className:"header"},l.createElement("img",{src:"imgs/128.png",alt:"Extension logo",className:"logo"}))}function d({error:e}){let t="";return t="string"==typeof e?e:e.message?e.message:e,l.createElement("div",{className:"notification is-warning has-text-left"},l.createElement("strong",null,"Something went wrong"),l.createElement("br",null),!t&&l.createElement("small",null,"It is probably a network error. Please try again later."),t&&l.createElement(l.Fragment,null,l.createElement("br",null),l.createElement("small",null,t)))}function b({children:e}){const{ErrorBoundary:t,didCatch:a,error:n}=Object(u.a)();return l.createElement(l.Fragment,null,a?l.createElement("div",{className:"page-container"},l.createElement(m,null),l.createElement("div",{className:"content has-text-centered"},l.createElement(d,{error:n}))):l.createElement(t,null,e))}var E=a(43);a(524);function p({children:e}){return l.createElement("div",{className:"page-container"},e)}var v=a(7),f=a.n(v);a(525);function h({children:e,className:t}){return l.createElement("div",{className:f()("content",t)},e)}var g=a(5),O=a(6),y=a(10);function j(){return l.createElement("footer",{className:"has-text-centered"},l.createElement(g.a,{size:"sm",icon:O.z,color:"#bbb"})," ",l.createElement("small",{className:"has-text-grey"},"We use Paddle.com for handling payments securely."),l.createElement("small",null,l.createElement("br",null),l.createElement("a",{className:"external-link has-text-grey",href:"mailto:"+y.o},y.o)))}function N(){return l.createElement("div",{className:"loader-block"},l.createElement(g.a,{size:"3x",icon:O.k,spin:!0,color:"#bbb"}))}var k=a(19);function D({paymentData:e}){return l.createElement("div",{className:"has-text-left"},"deleted"!==e.status&&e.update_url&&l.createElement("a",{className:"button is-info is-outlined",href:e.update_url},"Update payment details")," ","deleted"!==e.status&&e.cancel_url&&l.createElement("a",{className:"button is-danger is-outlined",href:e.cancel_url},"Cancel Pro")," ",e.receipt_url&&l.createElement("a",{className:"button is-outlined",href:e.receipt_url,target:"_blank",rel:"noreferrer noopener"},"Last Receipt"))}var w=a(32);function S({priceData:e,isYearly:t,onSwitch:a}){const n=Object(l.useMemo)(()=>Object(w.b)(e),[e]),r=f()({"has-text-weight-bold":0}),c=f()({"has-text-weight-bold":0});return l.createElement("div",{className:"field switch-block"},l.createElement("label",{htmlFor:"switchYearly",className:r},"Billed Monthly")," ",l.createElement("input",{id:"switchYearly",type:"checkbox",name:"switchYearly",className:"switch is-rounded is-outlined",checked:t,onChange:a}),l.createElement("label",{htmlFor:"switchYearly",className:c},"Billed Yearly",n&&l.createElement("span",{className:"save-number"},"Save ",n,"%")))}a(526);function C({onClick:e}){return l.createElement("div",{className:"g-sign-in-button",onClick:e},l.createElement("div",{className:"content-wrapper"},l.createElement("div",{className:"logo-wrapper"},l.createElement("img",{src:"imgs/google-g.png"})),l.createElement("span",{className:"text-container"},"Sign in with Google")))}function A({isOpen:e,onClose:t,onSelectProvider:a}){return l.createElement("div",{className:f()("modal",{"is-active":e})},l.createElement("div",{className:"modal-background"}),l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"box sign-in-methods"},l.createElement("h2",null,"Sign in to continue"),l.createElement("br",null),l.createElement("div",null,l.createElement(C,{onClick:()=>a(y.b.GOOGLE)})),l.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:t}))))}var x=a(22);function _({priceData:e,productId:t,isYearly:a}){const n=Object(l.useMemo)(()=>e&&(null==e?void 0:e.find(e=>e.product_id===t)),[e,t]),r=n.subscription,c=Object(w.a)(a,n);return n?l.createElement("div",{className:"price"},l.createElement("strong",null,r.trial_days," days free"),l.createElement("span",null,", then ",c," ",n.currency,"/month")):(x.a(n),l.createElement("div",null,"Network error. Please try again later"))}const P="restore",I="activate",M=({pendingAction:e})=>l.createElement(l.Fragment,null,e===I&&l.createElement("span",null,"Activating..."),e===P&&l.createElement("span",null,"Restoring..."),!e&&l.createElement("span",null,"Activate ",l.createElement("strong",null,"Pro")));function R({onActivate:e,onRestore:t,hasAuth:a}){const[r,c]=Object(l.useState)(!1),[s,o]=Object(l.useState)(!0),[i,u]=Object(l.useState)(null),[m,b]=Object(l.useState)(null),[p,v]=Object(l.useState)(0),{priceData:f,loading:h,error:j}=function(){const[e,t]=Object(l.useState)(null),[a,n]=Object(l.useState)(!0),[r,c]=Object(l.useState)(null);return Object(l.useEffect)(()=>{Object(E.a)().then(({response:{products:e}})=>c(e)).catch(e=>t((null==e?void 0:e.message)||JSON.stringify(e))).finally(()=>n(!1))},[]),{priceData:r,loading:a,error:e}}(),k=Object(l.useCallback)(()=>c(!0),[]),D=Object(l.useCallback)(()=>{c(!1),b(null)},[]);Object(l.useEffect)(()=>{if(null!=f&&f.length&&!i){const e=Object(w.d)(f);u(null==e?void 0:e.product_id)}},[f,i]);const C=Object(l.useCallback)(a=>{switch(m){case I:e({productId:i,authProvider:a,marketingConsent:p});break;case P:t(a)}},[e,t,i,m,p]),x=Object(l.useCallback)(e=>{const t=e.target.checked;o(t),u(t?Object(w.d)(f).product_id:Object(w.c)(f).product_id)},[f]),R=Object(l.useCallback)(e=>{e.preventDefault(),b(P),k(),Object(n.a)("Activation","RestoreButton")},[k]),Y=Object(l.useCallback)(()=>{b(I),a?e({productId:i,marketingConsent:p}):k(),Object(n.a)("Activation","ActivateButton",a?"auth":"no-auth")},[k,a,e,p,i]),B=Object(l.useCallback)(e=>{v(e.target.checked?1:0)},[]),L=Object(l.useCallback)(()=>{Object(n.a)("Activation","LearnMoreLink")},[]);return h?l.createElement(N,null):l.createElement("div",{className:"payment-block"},j&&l.createElement(d,{error:j}),l.createElement(A,{isOpen:r,onClose:D,onSelectProvider:C}),l.createElement(S,{priceData:f,isYearly:s,onSwitch:x}),l.createElement("div",null,l.createElement("button",{className:"button is-success activate-subs-button is-rounded",onClick:Y,disabled:Boolean(m)},l.createElement(M,{pendingAction:m})),l.createElement("div",{className:"email-consent"},l.createElement("label",{className:"checkbox"},l.createElement("input",{type:"checkbox",checked:Boolean(p),onChange:B})," ",l.createElement("small",null,"I want to receive important product updates and offers via email"))),l.createElement(_,{priceData:f,productId:i,isYearly:s})),l.createElement("hr",null),!a&&l.createElement("div",{className:"restore-activation"},l.createElement("a",{href:"#",onClick:R},"Sign-In / Restore activation")),l.createElement("div",{className:"learn-more"},l.createElement("a",{href:y.m,target:"_blank",rel:"noreferrer noopener",onClick:L},"Learn more about Pro Features"," ",l.createElement(g.a,{icon:O.s}))))}var Y=a(20),B=a.n(Y),L=a(86);function F({status:e}){const t=Object(l.useMemo)(()=>{switch(e){case k.a.TRIALING:case k.a.ACTIVE:return"is-success";case k.a.PAST_DUE:case k.a.PAUSED:return"is-warning";case k.a.DELETED:return"is-danger"}},[e]);return l.createElement("strong",{className:f()("tag is-light is-uppercase",t)},e)}function T(e){return B()(e).format("DD MMMM YYYY")}function U({data:e,isDeleted:t}){var a;const{paymentData:n,userAuthData:r}=e,c=(null==n?void 0:n.cancellation_effective_date)||null,s=Object(l.useCallback)(e=>{e.preventDefault(),Object(L.b)().then(()=>window.location.reload())},[]),o=null==r||null===(a=r.providerData)||void 0===a?void 0:a[0].providerId;return l.createElement("div",{className:"has-text-left"},l.createElement("div",{className:"user-account"},r.photoURL&&l.createElement("img",{className:"avatar",src:r.photoURL,alt:"User avatar"}),l.createElement("span",{className:"email"},r.email)," ",o&&l.createElement("small",{className:"has-text-grey"},"(via ",o,")")," ",l.createElement("a",{className:"button is-text is-small",onClick:s},"Sign Out")),n&&l.createElement(l.Fragment,null,l.createElement("hr",null),l.createElement("div",{className:"status-list"},l.createElement("div",null,"Subscription status: ",l.createElement(F,{status:n.status})),t&&c&&l.createElement("div",null,"Subscription is effective until: ",l.createElement("strong",null,T(c))),!t&&l.createElement("div",null,"Next bill date: ",T(n.next_bill_date)),!t&&l.createElement("div",null,"Amount: ",n.unit_price," ",n.currency))))}function J({data:e,loading:t,onActivate:a,onRestore:n}){const{paymentData:r,userAuthData:c}=e,{isDeleted:s,isPaused:o}=Object(l.useMemo)(()=>({isDeleted:r&&r.status===k.a.DELETED,isPaused:r&&r.status===k.a.PAUSED}),[r]),i=!t&&(!r||r&&(s||o)),u=Boolean((null==c?void 0:c.email)&&(null==c?void 0:c.providerData));return l.createElement(l.Fragment,null,c&&l.createElement(U,{data:e,isDeleted:s}),l.createElement("hr",null),r&&l.createElement(D,{paymentData:r}),i&&l.createElement(R,{onActivate:a,onRestore:n,hasAuth:u}))}a(112),a(527);var G=a(14);function z(){const[e,t]=Object(l.useState)(""),{data:a,loading:r,error:c}=function(e){const[t,a]=Object(l.useState)(null),[n,r]=Object(l.useState)(!0),[c,s]=Object(l.useState)({paymentData:null,userAuthData:null});return Object(l.useEffect)(()=>{r(!0),a(null),Object(E.b)(Boolean(e),e).then(({paymentData:e,userAuthData:t})=>s({paymentData:e,userAuthData:t})).catch(e=>{var t;"string"==typeof(null==e||null===(t=e.err)||void 0===t?void 0:t.message)?a(e.err.message):"string"==typeof(null==e?void 0:e.err)?a(e.err):a(JSON.stringify(e))}).finally(()=>r(!1))},[e]),{data:c,loading:n,error:t}}(e),[s,o]=Object(l.useState)(null),i=Object(l.useCallback)(async({productId:e,authProvider:t,marketingConsent:l})=>{o(null);let r=a;if(!r.userAuthData)try{r=await Object(E.b)(!0,t)}catch(e){"string"==typeof e?o(e):null!=e&&e.err?o(e.err):o(JSON.stringify(e.err))}Object(n.a)("Activation","ActivateRun",t),function({response:e,productId:t,marketingConsent:a,setError:l}){var r,c;const s=null==e||null===(r=e.userAuthData)||void 0===r?void 0:r.email;if(!s)return x.a(e),void l("Cannot authenticate user");const o=(null==e?void 0:e.paymentData)&&Object(G.d)(null==e||null===(c=e.paymentData)||void 0===c?void 0:c.status);o&&Object(n.a)("Activation","SubsReuse"),o?window.location.reload():Object(w.e)({em:s,id:t,mc:a})}({response:r,productId:e,marketingConsent:l,setError:o})},[a]),u=Object(l.useCallback)(e=>{t(e)},[]);return l.createElement(p,null,l.createElement(m,null),l.createElement(h,{className:"has-text-centered"},l.createElement("h3",null,"Pro Features"),r&&l.createElement(N,null),(c||s)&&l.createElement(d,{error:c||s}),!r&&l.createElement(J,{data:a,loading:r,onActivate:i,onRestore:u})),l.createElement(j,null))}(new i.a).applyTheme(),Object(o.a)(),Object(n.e)("Activation"),s.a.render(r.a.createElement(b,null,r.a.createElement(z,null)),document.getElementById("root"))}});